{% extends 'base.html' %}
{% from'_recipe_btn.html' import recipe_btn %}
{% from'_recipe_btn.html' import recipe_btn_small %}


{% block content %}

    <!-- RECIPE OF THE WEEK -->
    <div class="container-fluid">
        <h1 class="display-4 main-text text-center mt-5" style="background-image:url({{rotw.image}});">Recipe of the week</h1>
        <div class="jumbotron" id="recipe-of-the-week">
            {% for rotw in rotw %}
                <h2 class = "pb-3 text-center" id="rotw-title">{{ rotw.title}}</h2>
                    <img src={{rotw.image}} class="rotw-img" alt="recipe image">
                    <img src={{rotw.image_small}} class="rotw-img-small" alt="recipe image">
                <p class="mt-3 py-3 text-center" id="rotw-description">{{ rotw.description }}</p>

                {{ recipe_btn(rotw) }}

            {% endfor %}
        </div>
    </div>


    <!-- RECIPE SEARCH -->
    <div class="container">
        <hr>
        <h1 class="display-5 main-text text-center mt-5">wfpb recipes</h1>
        <div id="recipe-search">
            <h2 class="pb-3 text-center" id="rotw-title">explore & share</h2>
            <div class="row justify-content-center">
                <div class="col-12 col-md-10 col-lg-8">
                    <form class="card card-sm" method="POST" action="">
                        <div class="card-body row no-gutters align-items-center">
                            <div class="col">
                            <input class="form-control form-control-lg form-control-search" name="recipe" placeholder="Search recipes">
                            </div>
                            <div class="col-auto">
                            <button class="btn btn-lg btn-success" type="submit">Search</button></a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <hr class="mb-5">
    </div>


    <!-- CALL TO ACTION - JOIN THE REVOLUTION - SUBMIT YOUR RECIPE -->
    <div class="container-fluid" id="revolution">
        <div class="container my-5">
            <h1 class="display-5 main-text text-center">Join the revolution</h1>
            <hr id="revolution_underline">
            <div id="revolution-inner-container">
                <p id="revolution_text">
                    Dr. T. Colin Campbell has shown that heart disease, diabetes and obesity can be prevented and reversed using good nutrition. Help support our community achieve positive lifestyle changes by sharing your healthy whole-food, plant-based recipes.
                </p>
            </div>
            <div class="submit-recipe-wrapper mt-5 text-center">
                <a href="{{ url_for('submit_recipe') }}"><button class="btn btn-lg btn-outline-light" id="submit-recipe">Submit your recipe</button></a>
            </div>
        </div>
    </div>


    <!-- MOST RECENT RECIPES -->
    <div class="container-fluid">
        {% for recipe in recipes %}
        <div class="recipes-container">
            <div class="card mb-3">
                <div class="row no-gutters">
                    <div class="col-md-3 card-img-container">
                        <img src={{recipe.image_small}} class="card-img recipe-img" alt="placeholder image">
                    </div>
                    <div class="col-md-8 card-contents">
                        <div class="card-body">
                            <h5 class="card-title">{{recipe.title}}</h5>
                            <p class="card-text">
                                {{recipe.description}}
                            </p>
                            <div class="card-footer" id="submitted-by">
                                <small class="text-muted">Submitted by {{recipe.username}} on {{recipe.date_added.strftime('%d-%m-%Y')}}</small>
                            </div>
                            <div>
                               {{ recipe_btn_small(recipe) }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>


    <!-- MOST POPULAR RECIPE -->
    <div class="container-fluid">
        <h1 class="display-4 main-text text-center mt-5" style="background-image:url({{mpr.image}});">Most Popular Recipe</h1>
        <div class="jumbotron" id="most-popular-recipe">
            {% for mpr in mpr %}
            <h2 class="pb-3 text-center" id="mpr-title">{{ mpr.title}}</h2>
            <img src={{mpr.image}} class="mpr-img" alt="placeholder image">
            <img src={{mpr.image_small}} class="mpr-img-small" alt="placeholder image">
            <p class="mt-3 py-3 text-center" id="mpr-description">{{ mpr.description }}</p>
            
            {{ recipe_btn(mpr) }}
            
            {% endfor %}
        </div>
    </div>
{% endblock content %}